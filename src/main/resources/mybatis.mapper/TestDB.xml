<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.simplify.sample.db.mapper.TestMapper">

    <select id="getAll" resultType="com.simplify.sample.db.dto.Test">
        SELECT * FROM test
    </select>

    <select id="checkUserInfo" parameterType="com.simplify.sample.db.dto.memberVO" resultType="int">
        select count(*) from user where id = (#{id}) and pass=(#{pass})
    </select>

    <insert id="insertMainList" parameterType="com.simplify.sample.db.dto.memberVO">
        insert into user (id,pass) values (#{id}, #{pass})
    </insert>

     <insert id="insertContent" parameterType="com.simplify.sample.db.dto.contentVO">
        insert into board (title, content, user_id,delpass) value (#{title},#{content},#{user_id},#{delpass})
    </insert>

    <select id="getAllContent" resultType="com.simplify.sample.db.dto.contentVO">
        SELECT id, title, content, writetime FROM board
     </select>

    <select id="getContent" resultType="com.simplify.sample.db.dto.allcontentVO">
        SELECT id, title, content, delpass, user_id FROM board
     </select>

    <select id="getContentDetail" resultType="com.simplify.sample.db.dto.contentVO" parameterType="com.simplify.sample.db.dto.contentVO">
        SELECT title, content, delpass FROM board  WHERE id = (#{id})
    </select>

    <select id="findContentById" resultType="com.simplify.sample.db.dto.contentVO">
        SELECT id FROM board
    </select>

    <update id="updateContent" parameterType="com.simplify.sample.db.dto.contentVO">
        UPDATE board SET title = (#{title}), delpass= (#{delpass}),content= (#{content}) where id = (#{id})
    </update>

    <insert id="insertCommnet" parameterType="com.simplify.sample.db.dto.commentVO">
        insert into comment(user_id, board_id, content) value(#{user_id},#{board_id},#{content})
    </insert>

     <!--    commentVO에 user_id, board_id 생성자를 만들었을 때 오류가 나는 이유?-->
    <select id="findCommentsByBoardId" parameterType="com.simplify.sample.db.dto.contentVO" resultType="com.simplify.sample.db.dto.commentVO">
        select user_id, content from comment where board_id = (#{id})
    </select>

    <delete id="deleteContentById" parameterType="int">
        DELETE from board WHERE id = (#{id})
    </delete>

<!--    ???resultType이 배열이어도 단일 결과 값과 같이 commentVO를 사용하면 되는가???-->
    <select id="searchContentByWriter" parameterType="String" resultType="com.simplify.sample.db.dto.commentVO">
        select *from board where user_id = ({#user_id})
    </select>

    <select id="searchContentByContentWord" parameterType="String" resultType="com.simplify.sample.db.dto.commentVO">
        select * from board where content like %({#content_word})%
    </select>
</mapper>